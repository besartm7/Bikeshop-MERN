{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/realmadrid/Desktop/Bike-v3/BikeShop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Form,Button,Row,Col,Card}from'react-bootstrap';import Message from'../components/Message';import Loader from'../components/Loader';import{getUserInfo,updateUserInfo}from'../actions/userAction';var MyProfile=function MyProfile(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var dispatch=useDispatch();//get user register state\nvar userInfoDetails=useSelector(function(state){return state.userInfoDetails;});var loading=userInfoDetails.loading,error=userInfoDetails.error,user=userInfoDetails.user;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userUpdate=useSelector(function(state){return state.userUpdate;});var success=userUpdate.success;//if loged in redirect\nuseEffect(function(){//if it is not null, logged user\nif(!userInfo){history.push('/login');}else{if(!user.name){dispatch(getUserInfo('profile'));}else{setName(user.name);setEmail(user.email);}}},[history,userInfo,dispatch,user]);var submitHandler=function submitHandler(e){e.preventDefault();if(password!==confirmPassword){setMessage('Password do not match');}else{dispatch(updateUserInfo({id:user._id,name:name,email:email,password:password}));}};return/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:{span:6,offset:3},children:/*#__PURE__*/_jsx(Card,{className:\"m-5\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Profile\"})}),message&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:message}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Message,{variant:\"success\",children:\"Update Success\"}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"E-mail:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"confirmpassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Confirm password\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",className:\"btn-dark btn-block\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-save\"}),' ',\"Save\"]})]})]})})})});};export default MyProfile;","map":{"version":3,"sources":["C:/Users/realmadrid/Desktop/Bike-v3/BikeShop/frontend/src/layout/MyProfile.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Form","Button","Row","Col","Card","Message","Loader","getUserInfo","updateUserInfo","MyProfile","history","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","dispatch","userInfoDetails","state","loading","error","user","userLogin","userInfo","userUpdate","success","push","submitHandler","e","preventDefault","id","_id","span","offset","target","value"],"mappings":"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","sourcesContent":["import React,{ useEffect, useState} from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Form, Button, Row, Col, Card } from 'react-bootstrap'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport { getUserInfo, updateUserInfo } from '../actions/userAction'\r\n\r\nconst MyProfile = ({history}) => {\r\n    const[name, setName] = useState('')\r\n    const[email, setEmail] = useState('')\r\n    const[password, setPassword] = useState('')\r\n    const[confirmPassword, setConfirmPassword] = useState('')\r\n    const[message, setMessage] = useState(null)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    //get user register state\r\n    const userInfoDetails = useSelector(state => state.userInfoDetails)\r\n    const { loading, error, user } = userInfoDetails\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const userUpdate = useSelector(state => state.userUpdate)\r\n    const { success } = userUpdate\r\n\r\n    //if loged in redirect\r\n    useEffect(()=>{\r\n        //if it is not null, logged user\r\n         if(!userInfo){\r\n             history.push('/login')\r\n         }else{\r\n             if(!user.name){\r\n                 dispatch(getUserInfo('profile'))\r\n             }else{\r\n                 setName(user.name)\r\n                 setEmail(user.email)\r\n             }\r\n         }\r\n    },[history, userInfo, dispatch, user])\r\n\r\n    const submitHandler = (e)=>{\r\n        e.preventDefault()\r\n        if(password !== confirmPassword){\r\n            setMessage('Password do not match')\r\n        }\r\n        else{\r\n           dispatch(updateUserInfo({id: user._id, name, email, password}))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Row>\r\n            <Col md={{span:6, offset: 3}}>\r\n            <Card className='m-5'>\r\n            <Card.Body>\r\n                <h3 className='text-center'><b>Profile</b></h3>\r\n                {message && <Message variant='danger'>{message}</Message>}\r\n                {error && <Message variant='danger'>{error}</Message>}\r\n                {success && <Message variant='success'>Update Success</Message>}\r\n                {loading && <Loader />}\r\n                <Form onSubmit={submitHandler}>\r\n                    <Form.Group controlId='name'>\r\n                        <Form.Label>Name:</Form.Label>\r\n                        <Form.Control type='text' placeholder='Enter name' value={name} onChange={(e) => setName(e.target.value)}></Form.Control>\r\n                    </Form.Group>\r\n                    <Form.Group controlId='email'>\r\n                        <Form.Label>E-mail:</Form.Label>\r\n                        <Form.Control type='text' placeholder='Enter email' value={email} onChange={(e) => setEmail(e.target.value)}></Form.Control>\r\n                    </Form.Group>\r\n                    <Form.Group controlId='password'>\r\n                        <Form.Label>Password:</Form.Label>\r\n                        <Form.Control \r\n                            type='password' \r\n                            placeholder='Enter password' \r\n                            value={password} \r\n                            onChange={(e) => setPassword(e.target.value)}></Form.Control>\r\n                    </Form.Group>\r\n                    <Form.Group controlId='confirmpassword'>\r\n                        <Form.Label>Confirm Password:</Form.Label>\r\n                        <Form.Control \r\n                            type='password' \r\n                            placeholder='Confirm password' \r\n                            value={confirmPassword} \r\n                            onChange={(e) => setConfirmPassword(e.target.value)}></Form.Control>\r\n                    </Form.Group>\r\n                    <Button type='submit' className='btn-dark btn-block'><i className='fas fa-save'></i>{' '}Save</Button>\r\n                </Form>\r\n            </Card.Body>\r\n            </Card>\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default MyProfile\r\n"]},"metadata":{},"sourceType":"module"}