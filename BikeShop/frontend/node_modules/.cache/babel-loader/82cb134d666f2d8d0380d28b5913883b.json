{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\realmadrid\\\\Desktop\\\\BikeShop\\\\frontend\\\\src\\\\layout\\\\PlaceOrderScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button, Row, Col, ListGroup, Image, Card } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Message from '../components/Message';\nimport CheckoutSteps from '../components/CheckoutSteps';\nimport { createOrder } from '../actions/orderAction';\n\nconst PlaceOrderScreen = ({\n  history\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cart);\n  console.log(cart.cartItems.length); //calculate price\n\n  cart.itemsPrice = cart.cartItems.reduce((acc, item) => acc + item.price * item.qty, 0);\n  cart.shippingPrice = cart.itemsPrice > 500 ? 10 : 20;\n  cart.taxPrice = Number((0.19 * cart.itemsPrice).toFixed(2));\n  cart.totalPrice = (Number(cart.itemsPrice) + Number(cart.shippingPrice) + Number(cart.taxPrice)).toFixed(2);\n  const orderCreate = useSelector(state => state.orderCreate);\n  const {\n    order,\n    success,\n    error\n  } = orderCreate;\n  useEffect(() => {\n    if (success) {\n      history.push(`/order/${order._id}`);\n    } // eslint-disable-next-line\n\n  }, [history, success]);\n\n  const placeOrderHandler = () => {\n    dispatch(createOrder({\n      orderItems: cart.cartItems,\n      shippingAddress: cart.shippingAddress,\n      paymentMethod: cart.paymentMethod,\n      itemsPrice: cart.itemsPrice,\n      shippingPrice: cart.shippingPrice,\n      taxPrice: cart.taxPrice,\n      totalPrice: cart.totalPrice\n    }));\n    localStorage.removeItem('cartItems');\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CheckoutSteps, {\n      step1: true,\n      step2: true,\n      step3: true,\n      step4: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: 8,\n            children: /*#__PURE__*/_jsxDEV(ListGroup, {\n              variant: \"flush\",\n              children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"Shipping\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 52,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Address\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 54,\n                    columnNumber: 33\n                  }, this), cart.shippingAddress.address, \",\", ' ', cart.shippingAddress.city, ' ', cart.shippingAddress.postalCode, \",\", ' ', cart.shippingAddress.country, \",\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 53,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 51,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"Payment Method\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 62,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Method: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 29\n                }, this), cart.paymentMethod]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"Order Items\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 67,\n                  columnNumber: 29\n                }, this), cart.cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(Message, {\n                  children: \"Your cart is empty!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 60\n                }, this) : /*#__PURE__*/_jsxDEV(ListGroup, {\n                  variant: \"flush\",\n                  children: cart.cartItems.map((item, index) => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                    children: /*#__PURE__*/_jsxDEV(Row, {\n                      children: [/*#__PURE__*/_jsxDEV(Col, {\n                        md: 1,\n                        children: /*#__PURE__*/_jsxDEV(Image, {\n                          src: item.image,\n                          alt: item.name,\n                          fluid: true,\n                          rounded: true\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 74,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 73,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(Col, {\n                        children: /*#__PURE__*/_jsxDEV(Link, {\n                          to: `/bikes/${item.bikeId}`,\n                          children: item.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 77,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 76,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(Col, {\n                        md: 4,\n                        children: [item.qty, \" x $\", item.price, \" = $\", item.qty * item.price]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 79,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 72,\n                      columnNumber: 45\n                    }, this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 71,\n                    columnNumber: 41\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 4,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              children: /*#__PURE__*/_jsxDEV(ListGroup, {\n                variant: \"flush\",\n                children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"Order Summary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                  children: /*#__PURE__*/_jsxDEV(Row, {\n                    children: [/*#__PURE__*/_jsxDEV(Col, {\n                      children: \"Items\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 98,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(Col, {\n                      children: [\"$\", cart.itemsPrice]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 99,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 97,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                  children: /*#__PURE__*/_jsxDEV(Row, {\n                    children: [/*#__PURE__*/_jsxDEV(Col, {\n                      children: \"Shipping\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 104,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(Col, {\n                      children: [\"$\", cart.shippingPrice]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 105,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                  children: /*#__PURE__*/_jsxDEV(Row, {\n                    children: [/*#__PURE__*/_jsxDEV(Col, {\n                      children: \"Tax\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 110,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(Col, {\n                      children: [\"$\", cart.taxPrice]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 111,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                  children: /*#__PURE__*/_jsxDEV(Row, {\n                    children: [/*#__PURE__*/_jsxDEV(Col, {\n                      children: \"Total\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 116,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(Col, {\n                      children: [\"$\", cart.totalPrice]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 115,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                  children: error && /*#__PURE__*/_jsxDEV(Message, {\n                    variant: \"danger\",\n                    children: error\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 47\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                  children: [console.log('hi', cart.cartItems.length === 0), /*#__PURE__*/_jsxDEV(Button, {\n                    type: \"button\",\n                    className: \"btn-block btn-dark\",\n                    disabled: cart.cartItems.length === 0,\n                    onClick: placeOrderHandler,\n                    children: \"Place Order\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(PlaceOrderScreen, \"AeTv9kmyl0FB+wAGFBRuJNmoS50=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = PlaceOrderScreen;\nexport default PlaceOrderScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"PlaceOrderScreen\");","map":{"version":3,"sources":["C:/Users/realmadrid/Desktop/BikeShop/frontend/src/layout/PlaceOrderScreen.js"],"names":["React","useEffect","Link","Button","Row","Col","ListGroup","Image","Card","useDispatch","useSelector","Message","CheckoutSteps","createOrder","PlaceOrderScreen","history","dispatch","cart","state","console","log","cartItems","length","itemsPrice","reduce","acc","item","price","qty","shippingPrice","taxPrice","Number","toFixed","totalPrice","orderCreate","order","success","error","push","_id","placeOrderHandler","orderItems","shippingAddress","paymentMethod","localStorage","removeItem","address","city","postalCode","country","map","index","image","name","bikeId"],"mappings":"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","sourcesContent":["import React,{ useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport {Button, Row, Col, ListGroup, Image, Card } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport CheckoutSteps from '../components/CheckoutSteps'\r\nimport { createOrder } from '../actions/orderAction'\r\n\r\nconst PlaceOrderScreen = ({history}) => {\r\n    const dispatch = useDispatch()\r\n    const cart = useSelector(state => state.cart)\r\n    console.log(cart.cartItems.length)\r\n\r\n    //calculate price\r\n    cart.itemsPrice = cart.cartItems.reduce((acc, item) => acc + item.price * item.qty, 0)\r\n    cart.shippingPrice = cart.itemsPrice > 500 ? 10 : 20\r\n    cart.taxPrice = Number((0.19 * cart.itemsPrice).toFixed(2))\r\n    cart.totalPrice = (Number(cart.itemsPrice) + Number(cart.shippingPrice) + Number(cart.taxPrice)).toFixed(2)\r\n\r\n    const orderCreate = useSelector(state => state.orderCreate)\r\n    const { order, success, error} = orderCreate\r\n\r\n    useEffect(() =>{\r\n        if(success){\r\n            history.push(`/order/${order._id}`)\r\n        }\r\n        // eslint-disable-next-line\r\n    },[history, success])\r\n\r\n    const placeOrderHandler = () =>{\r\n        dispatch(createOrder({\r\n            orderItems: cart.cartItems,\r\n            shippingAddress: cart.shippingAddress,\r\n            paymentMethod: cart.paymentMethod,\r\n            itemsPrice: cart.itemsPrice,\r\n            shippingPrice: cart.shippingPrice,\r\n            taxPrice: cart.taxPrice,\r\n            totalPrice: cart.totalPrice,\r\n        }))\r\n        localStorage.removeItem('cartItems')\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            <CheckoutSteps step1 step2 step3 step4/>\r\n            <Card>\r\n            <Card.Body>\r\n            <Row>\r\n                <Col md={8}>\r\n                    <ListGroup variant='flush'>\r\n                        <ListGroup.Item>\r\n                            <h3>Shipping</h3>\r\n                            <p>\r\n                                <strong>Address</strong>\r\n                                {cart.shippingAddress.address},{' '}\r\n                                {cart.shippingAddress.city}{' '}\r\n                                {cart.shippingAddress.postalCode},{' '}\r\n                                {cart.shippingAddress.country},\r\n                            </p>\r\n                        </ListGroup.Item>\r\n                        <ListGroup.Item>\r\n                            <h3>Payment Method</h3>\r\n                            <strong>Method: </strong>\r\n                            {cart.paymentMethod}\r\n                        </ListGroup.Item>\r\n                        <ListGroup.Item>\r\n                            <h3>Order Items</h3>\r\n                            {cart.cartItems.length === 0 ? <Message>Your cart is empty!</Message>:(\r\n                                <ListGroup variant='flush'>\r\n                                    {cart.cartItems.map((item, index) => (\r\n                                        <ListGroup.Item key={index}>\r\n                                            <Row>\r\n                                                <Col md={1}>\r\n                                                    <Image src={item.image} alt={item.name} fluid rounded/>\r\n                                                </Col>\r\n                                                <Col>\r\n                                                    <Link to={`/bikes/${item.bikeId}`}>{ item.name }</Link>\r\n                                                </Col>\r\n                                                <Col md={4}>\r\n                                                    {item.qty} x ${item.price} = ${item.qty*item.price}\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </ListGroup.Item>\r\n                                    ))}\r\n                                </ListGroup>\r\n                            )}\r\n                        </ListGroup.Item>\r\n                    </ListGroup>\r\n                </Col>\r\n                <Col md={4}>\r\n                    <Card>\r\n                        <ListGroup variant='flush'>\r\n                            <ListGroup.Item>\r\n                                <h3>Order Summary</h3>\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                <Row>\r\n                                    <Col>Items</Col>\r\n                                    <Col>${cart.itemsPrice}</Col>\r\n                                </Row>\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                <Row>\r\n                                    <Col>Shipping</Col>\r\n                                    <Col>${cart.shippingPrice}</Col>\r\n                                </Row>\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                <Row>\r\n                                    <Col>Tax</Col>\r\n                                    <Col>${cart.taxPrice}</Col>\r\n                                </Row>\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                <Row>\r\n                                    <Col>Total</Col>\r\n                                    <Col>${cart.totalPrice}</Col>\r\n                                </Row>\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                    {error && <Message variant='danger'>{error}</Message>}\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                {console.log('hi',cart.cartItems.length === 0)}\r\n                                <Button \r\n                                    type='button' \r\n                                    className='btn-block btn-dark' \r\n                                    disabled={cart.cartItems.length === 0}\r\n                                    onClick={placeOrderHandler}\r\n                                >Place Order</Button>\r\n                            </ListGroup.Item>\r\n                        </ListGroup>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n            </Card.Body>\r\n            </Card>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PlaceOrderScreen\r\n"]},"metadata":{},"sourceType":"module"}