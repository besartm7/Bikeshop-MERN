{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"C:/Users/realmadrid/Desktop/BikeShop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/realmadrid/Desktop/BikeShop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/realmadrid/Desktop/BikeShop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from'axios';import{useDispatch,useSelector}from'react-redux';import{Form,Button,Card,Image,Row,Col}from'react-bootstrap';import FormLargeContainer from'../../components/FormLargeContainer';import Message from'../../components/Message';import Loader from'../../components/Loader';import ExtractBikeColor from'../../components/ExtractBikeColor';import{ColorExtractor}from'react-color-extractor';import{createBike}from'../../actions/bikeAction';var CreateBikeView=function CreateBikeView(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var defaultImg='/images/default.jpg';var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),brand=_useState6[0],setBrand=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),price=_useState10[0],setPrice=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),countInStock=_useState12[0],setCountInStock=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),colors=_useState14[0],setColors=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),description=_useState16[0],setDescription=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),uploading=_useState18[0],setUploading=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),newUpload=_useState20[0],setNewUpload=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),fileUpload=_useState22[0],setFileUpload=_useState22[1];var dispatch=useDispatch();var bikeCreate=useSelector(function(state){return state.bikeCreate;});var loading=bikeCreate.loading,error=bikeCreate.error,success=bikeCreate.success;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;useEffect(function(){if(!userInfo||!userInfo.isAdmin)history.push('/login');if(success)history.push('/admin/bikelist');},[history,success,userInfo]);var uploadFileHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,formData,config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];setFileUpload(file);formData=new FormData();formData.append('image',file);setUploading(true);_context.prev=5;config={headers:{'Content-Type':'multipart/form-data'}};_context.next=9;return axios.post('/api/upload',formData,config);case 9:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setImage(data);setUploading(false);setNewUpload(true);_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](5);console.error(_context.t0);setUploading(false);case 20:case\"end\":return _context.stop();}}},_callee,null,[[5,16]]);}));return function uploadFileHandler(_x){return _ref2.apply(this,arguments);};}();var removeColorHandler=function removeColorHandler(e){var filteredColors=colors.filter(function(color){return color!==e;});setColors(filteredColors);};var clearHandler=function clearHandler(){setImage('');setName('');setBrand('');setCategory('');setPrice(0);setCountInStock(0);setColors([]);setDescription('');setFileUpload('');};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(createBike({image:image,colors:colors,name:name,brand:brand,category:category,price:price,countInStock:countInStock,description:description}));};return/*#__PURE__*/_jsx(FormLargeContainer,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-center mb-5\",children:[\"Create Bike \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bicycle\"})]}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,className:\"col-sm-12\",children:[/*#__PURE__*/_jsxs(Form.Group,{as:Row,controlId:\"image\",children:[/*#__PURE__*/_jsx(Col,{xs:12,md:3,children:/*#__PURE__*/_jsx(Image,{src:fileUpload?URL.createObjectURL(fileUpload):defaultImg,alt:name,style:{width:100},thumbnail:true})}),/*#__PURE__*/_jsxs(Col,{xs:12,md:9,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Upload bike image:\"}),/*#__PURE__*/_jsx(Form.File,{id:\"image-file\",label:image?image:'Choose File',custom:true,onChange:uploadFileHandler,children:uploading&&/*#__PURE__*/_jsx(Loader,{})})]})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,controlId:\"colors\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,xs:12,md:3,children:\"Colors:\"}),/*#__PURE__*/_jsxs(Col,{xs:12,md:9,className:\"editbike-colors\",children:[/*#__PURE__*/_jsx(ColorExtractor,{getColors:function getColors(colorsArray){if(newUpload){setColors(colorsArray);setNewUpload(false);}},children:/*#__PURE__*/_jsx(\"img\",{src:newUpload?URL.createObjectURL(fileUpload):'',alt:\"\"})}),/*#__PURE__*/_jsx(ExtractBikeColor,{bikeColors:colors||[],removeColorHandler:removeColorHandler})]})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,xs:12,md:3,children:\"Name:\"}),/*#__PURE__*/_jsx(Col,{xs:12,md:9,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"name\",value:name,required:true,onChange:function onChange(e){return setName(e.target.value);}})})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,controlId:\"brand\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,xs:12,md:3,children:\"Brand:\"}),/*#__PURE__*/_jsx(Col,{xs:12,md:9,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"brand\",value:brand,onChange:function onChange(e){return setBrand(e.target.value);}})})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,controlId:\"category\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,xs:12,md:3,children:\"Category:\"}),/*#__PURE__*/_jsx(Col,{xs:12,md:9,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,controlId:\"price\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,xs:12,md:3,children:\"Price:\"}),/*#__PURE__*/_jsx(Col,{xs:12,md:9,children:/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"price\",value:price,onChange:function onChange(e){return setPrice(e.target.value);}})})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,controlId:\"countInStock\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,xs:12,md:3,children:\"Count in Stock:\"}),/*#__PURE__*/_jsx(Col,{xs:12,md:9,children:/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"count in stock\",value:countInStock,onChange:function onChange(e){return setCountInStock(e.target.value);}})})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,controlId:\"Description\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,xs:12,md:3,children:\"Description:\"}),/*#__PURE__*/_jsx(Col,{xs:12,md:9,children:/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,placeholder:\"description\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}})})]}),/*#__PURE__*/_jsxs(Row,{className:\"mt-5\",children:[/*#__PURE__*/_jsx(Col,{xs:6,className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:\"outline-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-save\"}),' ',\"Save\"]})}),/*#__PURE__*/_jsx(Col,{xs:6,className:\"text-left\",children:/*#__PURE__*/_jsxs(Button,{variant:\"outline-danger\",onClick:clearHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-broom\",children:\" \"}),\" \",' ',\" Clear\"]})})]})]})]})})});};export default CreateBikeView;","map":{"version":3,"sources":["C:/Users/realmadrid/Desktop/BikeShop/frontend/src/layout/admin/CreateBikeView.js"],"names":["React","useEffect","useState","axios","useDispatch","useSelector","Form","Button","Card","Image","Row","Col","FormLargeContainer","Message","Loader","ExtractBikeColor","ColorExtractor","createBike","CreateBikeView","history","image","setImage","defaultImg","name","setName","brand","setBrand","category","setCategory","price","setPrice","countInStock","setCountInStock","colors","setColors","description","setDescription","uploading","setUploading","newUpload","setNewUpload","fileUpload","setFileUpload","dispatch","bikeCreate","state","loading","error","success","userLogin","userInfo","isAdmin","push","uploadFileHandler","e","file","target","files","formData","FormData","append","config","headers","post","data","console","removeColorHandler","filteredColors","filter","color","clearHandler","submitHandler","preventDefault","URL","createObjectURL","width","colorsArray","value"],"mappings":"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","sourcesContent":["import React,{ useEffect, useState} from 'react'\r\nimport axios from 'axios'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Form, Button, Card, Image, Row, Col} from 'react-bootstrap'\r\nimport FormLargeContainer from '../../components/FormLargeContainer'\r\nimport Message from '../../components/Message'\r\nimport Loader from '../../components/Loader'\r\nimport ExtractBikeColor from '../../components/ExtractBikeColor'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { createBike } from '../../actions/bikeAction'\r\n\r\nconst CreateBikeView = ({history}) => {\r\n    const[image, setImage] = useState('')\r\n    const defaultImg = '/images/default.jpg'\r\n    const[name, setName] = useState('')\r\n    const[brand, setBrand] = useState('')\r\n    const[category, setCategory] = useState('')\r\n    const[price, setPrice] = useState(0)\r\n    const[countInStock, setCountInStock] = useState(0)\r\n    const[colors, setColors] = useState([])\r\n    const[description, setDescription] = useState('')\r\n    const[uploading, setUploading] = useState(false)\r\n    const[newUpload, setNewUpload] = useState(false)\r\n    const[fileUpload, setFileUpload] = useState('')\r\n\r\n    const dispatch = useDispatch()\r\n    \r\n    const bikeCreate = useSelector(state => state.bikeCreate)\r\n    const {loading, error, success} = bikeCreate\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n\r\n    useEffect(()=>{\r\n        if(!userInfo || !userInfo.isAdmin)\r\n            history.push('/login')\r\n\r\n        if(success)\r\n            history.push('/admin/bikelist')\r\n           \r\n    },[history, success, userInfo])\r\n\r\n    const uploadFileHandler = async (e) =>{\r\n        const file= e.target.files[0]\r\n        setFileUpload(file)\r\n        const formData = new FormData()\r\n        formData.append('image', file)\r\n        setUploading(true)\r\n\r\n        try {\r\n            const config = {\r\n                headers:{\r\n                    'Content-Type': 'multipart/form-data'\r\n                } \r\n            }\r\n            const { data } = await axios.post('/api/upload', formData, config)\r\n\r\n            setImage(data)\r\n            setUploading(false)\r\n            setNewUpload(true)\r\n        } catch (error) {\r\n            console.error(error)\r\n            setUploading(false)\r\n        }\r\n    }\r\n\r\n    const removeColorHandler = (e) =>{\r\n        const filteredColors = colors.filter(color => color !== e)\r\n        setColors(filteredColors)\r\n    }\r\n\r\n    const clearHandler = () =>{\r\n        setImage('')\r\n        setName('')\r\n        setBrand('')\r\n        setCategory('')\r\n        setPrice(0)\r\n        setCountInStock(0)\r\n        setColors([])\r\n        setDescription('')\r\n        setFileUpload('')\r\n    }\r\n\r\n    const submitHandler = (e)=>{\r\n        e.preventDefault()\r\n        dispatch(createBike({\r\n            image,\r\n            colors,\r\n            name,\r\n            brand,\r\n            category,\r\n            price,\r\n            countInStock,\r\n            description\r\n        }))\r\n    }\r\n\r\n    return (\r\n        <FormLargeContainer>\r\n            <Card>\r\n                <Card.Body>\r\n                    <h3 className='text-center mb-5'>Create Bike <i className='fas fa-bicycle'></i></h3>\r\n                    {loading ? <Loader /> : error ? <Message variant='danger'>{error}</Message> :(\r\n                    <Form onSubmit={submitHandler} className='col-sm-12'>\r\n                        <Form.Group as={Row} controlId='image'>\r\n                            <Col xs={12} md={3}>\r\n                                <Image \r\n                                    src={fileUpload \r\n                                            ? URL.createObjectURL(fileUpload) \r\n                                            : defaultImg\r\n                                        } \r\n                                    alt={name} \r\n                                    style={{width: 100}} \r\n                                    thumbnail\r\n                                        \r\n                                />\r\n                            </Col>\r\n                            <Col xs={12} md={9}>\r\n                                <Form.Label>Upload bike image:</Form.Label> \r\n                                <Form.File \r\n                                    id='image-file' \r\n                                    label={image ? image : 'Choose File'} \r\n                                    custom\r\n                                    onChange={uploadFileHandler}\r\n                                >{uploading && <Loader />}</Form.File>\r\n                            </Col>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group as={Row} controlId='colors'>\r\n                            <Form.Label column xs={12} md={3}>Colors:</Form.Label>\r\n                            <Col xs={12} md={9} className='editbike-colors'>\r\n                                <ColorExtractor\r\n                                    getColors={colorsArray => {\r\n                                        if(newUpload){\r\n                                            setColors(colorsArray)\r\n                                            setNewUpload(false)\r\n                                        }\r\n                                            \r\n                                    }}\r\n                                ><img src={newUpload \r\n                                    ? URL.createObjectURL(fileUpload)\r\n                                    : ''\r\n                                } alt='' /></ColorExtractor>\r\n                                <ExtractBikeColor bikeColors={colors || []} removeColorHandler={removeColorHandler} />\r\n                            </Col>\r\n                        </Form.Group>\r\n                        <Form.Group as={Row} controlId='name'>\r\n                            <Form.Label column xs={12} md={3}>Name:</Form.Label>\r\n                            <Col xs={12} md={9}>\r\n                                <Form.Control\r\n                                    type='text' \r\n                                    placeholder='name' \r\n                                    value={name} \r\n                                    required\r\n                                    onChange={(e) => setName(e.target.value)}\r\n                                >    \r\n                                </Form.Control>\r\n                            </Col>\r\n                        </Form.Group>\r\n                        <Form.Group as={Row} controlId='brand'>\r\n                            <Form.Label column xs={12} md={3}>Brand:</Form.Label>\r\n                            <Col xs={12} md={9}>\r\n                                <Form.Control \r\n                                    type='text' \r\n                                    placeholder='brand' \r\n                                    value={brand} \r\n                                    onChange={(e) => setBrand(e.target.value)}\r\n                                ></Form.Control>\r\n                            </Col>\r\n                        </Form.Group>\r\n                        <Form.Group as={Row} controlId='category'>\r\n                            <Form.Label column xs={12} md={3}>Category:</Form.Label>\r\n                            <Col xs={12} md={9}>\r\n                                <Form.Control \r\n                                    type='text' \r\n                                    placeholder='category' \r\n                                    value={category} \r\n                                    onChange={(e) => setCategory(e.target.value)}\r\n                                ></Form.Control>\r\n                            </Col>\r\n                        </Form.Group>\r\n                        <Form.Group as={Row} controlId='price'>\r\n                            <Form.Label column xs={12} md={3}>Price:</Form.Label>\r\n                            <Col xs={12} md={9}>\r\n                                <Form.Control \r\n                                    type='number' \r\n                                    placeholder='price' \r\n                                    value={price} \r\n                                    onChange={(e) => setPrice(e.target.value)}\r\n                                ></Form.Control>\r\n                            </Col>\r\n                        </Form.Group>\r\n                        <Form.Group as={Row} controlId='countInStock'>\r\n                            <Form.Label column xs={12} md={3}>Count in Stock:</Form.Label>\r\n                            <Col xs={12} md={9}>\r\n                                <Form.Control \r\n                                    type='number' \r\n                                    placeholder='count in stock' \r\n                                    value={countInStock} \r\n                                    onChange={(e) => setCountInStock(e.target.value)}\r\n                                ></Form.Control>\r\n                            </Col>\r\n                        </Form.Group>\r\n                        <Form.Group as={Row} controlId='Description'>\r\n                            <Form.Label column xs={12} md={3}>Description:</Form.Label>\r\n                            <Col xs={12} md={9}>\r\n                                <Form.Control \r\n                                    as='textarea'\r\n                                    rows={3}\r\n                                    placeholder='description' \r\n                                    value={description} \r\n                                    onChange={(e) => setDescription(e.target.value)}\r\n                                ></Form.Control>\r\n                            </Col>\r\n                        </Form.Group>\r\n                        <Row className='mt-5'>\r\n                            <Col xs={6} className=\"text-right\">\r\n                                <Button type='submit' variant='outline-primary'>\r\n                                    <i className='fas fa-save'></i>{' '}Save\r\n                                </Button>\r\n                            </Col>\r\n                            <Col xs={6} className=\"text-left\">\r\n                                <Button variant='outline-danger' onClick={clearHandler}>\r\n                                    <i className='fas fa-broom'> </i> {' '} Clear\r\n                                </Button>\r\n                            </Col>\r\n                        </Row>\r\n                    </Form>\r\n                    )}\r\n                </Card.Body>\r\n            </Card>\r\n        </FormLargeContainer>\r\n    )\r\n}\r\n\r\nexport default CreateBikeView\r\n"]},"metadata":{},"sourceType":"module"}