{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/realmadrid/Desktop/BikeShop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Row,Col}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import PaginationBox from'../../components/PaginationBox';import Message from'../../components/Message';import Loader from'../../components/Loader';import{listBikes,deleteBike}from'../../actions/bikeAction';import{getItemspp}from'../../actions/settingsAction';import{BIKE_CREATE_RESET}from'../../constants/bikeConstants';var BikeListView=function BikeListView(_ref){var history=_ref.history,match=_ref.match;var pageNumber=match.params.pageNumber||1;var _useState=useState(10),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var dispatch=useDispatch();var bikeList=useSelector(function(state){return state.bikeList;});var loading=bikeList.loading,error=bikeList.error,bikes=bikeList.bikes,page=bikeList.page,pages=bikeList.pages;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var bikeDelete=useSelector(function(state){return state.bikeDelete;});var loadingDelete=bikeDelete.loading,errorDelete=bikeDelete.error,successDelete=bikeDelete.success;var bikeCreate=useSelector(function(state){return state.bikeCreate;});var successCreate=bikeCreate.success,createdBike=bikeCreate.bike;var settingItemspp=useSelector(function(state){return state.settingItemspp;});var itemspp=settingItemspp.items;useEffect(function(){dispatch({type:BIKE_CREATE_RESET});if(!userInfo||!userInfo.isAdmin){history.push('/login');}else{if(!itemspp||!itemspp.items)dispatch(getItemspp());else setItems(itemspp.items);}if(successCreate){history.push(\"/admin/bikelist\");}else{if(items)dispatch(listBikes('',pageNumber,items));}},[dispatch,history,userInfo,successCreate,createdBike,successDelete,pageNumber,items,itemspp]);var createBikeHandler=function createBikeHandler(){history.push('/admin/bike/create');};var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure?')){dispatch(deleteBike(id));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{className:\"my-3 btn-sm\",variant:\"outline-dark\",onClick:createBikeHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),' ',\"Create Bike\"]})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Bikes\"})}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{hover:true,responsive:true,className:\"table-sm text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"dark-bgcolor\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRAND\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"IN STOCK\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ACTION\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bikes.map(function(bike){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:bike._id}),/*#__PURE__*/_jsx(\"td\",{children:bike.name}),/*#__PURE__*/_jsx(\"td\",{children:bike.brand}),/*#__PURE__*/_jsx(\"td\",{children:bike.category}),/*#__PURE__*/_jsx(\"td\",{children:bike.price}),/*#__PURE__*/_jsx(\"td\",{children:bike.countInStock}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/bike/\".concat(bike._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"outline-dark\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),' ',/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(bike._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},bike._id);})})]}),/*#__PURE__*/_jsx(PaginationBox,{pages:pages,page:page,isAdmin:true})]})]});};export default BikeListView;","map":{"version":3,"sources":["C:/Users/realmadrid/Desktop/BikeShop/frontend/src/layout/admin/BikeListView.js"],"names":["React","useState","useEffect","LinkContainer","Table","Button","Row","Col","useDispatch","useSelector","PaginationBox","Message","Loader","listBikes","deleteBike","getItemspp","BIKE_CREATE_RESET","BikeListView","history","match","pageNumber","params","items","setItems","dispatch","bikeList","state","loading","error","bikes","page","pages","userLogin","userInfo","bikeDelete","loadingDelete","errorDelete","successDelete","success","bikeCreate","successCreate","createdBike","bike","settingItemspp","itemspp","type","isAdmin","push","createBikeHandler","deleteHandler","id","window","confirm","map","_id","name","brand","category","price","countInStock"],"mappings":"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","sourcesContent":["import React,{ useState, useEffect} from 'react'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { Table, Button, Row, Col } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport PaginationBox from '../../components/PaginationBox'; \r\nimport Message from '../../components/Message'\r\nimport Loader from '../../components/Loader'\r\nimport { listBikes, deleteBike } from '../../actions/bikeAction'\r\nimport { getItemspp } from '../../actions/settingsAction' \r\nimport { BIKE_CREATE_RESET } from '../../constants/bikeConstants'\r\n\r\n\r\nconst BikeListView = ({history, match}) => {\r\n    const pageNumber = match.params.pageNumber || 1\r\n    const[items, setItems] = useState(10)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const bikeList = useSelector(state => state.bikeList)\r\n    const { loading, error, bikes, page, pages } = bikeList\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const bikeDelete = useSelector(state => state.bikeDelete)\r\n    const { loading: loadingDelete, error: errorDelete, success: successDelete } = bikeDelete\r\n\r\n    const bikeCreate = useSelector(state => state.bikeCreate)\r\n    const{  success: successCreate, bike: createdBike} = bikeCreate\r\n\r\n    const settingItemspp = useSelector(state => state.settingItemspp)\r\n    const { items: itemspp } = settingItemspp\r\n\r\n    useEffect(()=>{\r\n        dispatch({type: BIKE_CREATE_RESET})\r\n        if(!userInfo || !userInfo.isAdmin){\r\n            history.push('/login')\r\n        }else{\r\n            if(!itemspp || !itemspp.items)\r\n                dispatch(getItemspp())\r\n            else\r\n                setItems(itemspp.items)\r\n        }\r\n\r\n        if(successCreate){\r\n            history.push(`/admin/bikelist`)\r\n        }else{\r\n            if(items)\r\n                dispatch(listBikes('',pageNumber, items))\r\n        }\r\n        \r\n    },[dispatch, history, userInfo, successCreate, createdBike, successDelete, pageNumber, items, itemspp])\r\n\r\n    const createBikeHandler = () =>{\r\n        history.push('/admin/bike/create')\r\n    }\r\n\r\n    const deleteHandler = (id) =>{\r\n        if(window.confirm('Are you sure?')){\r\n            dispatch(deleteBike(id))\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <Row>\r\n                <Col className=\"text-right\">\r\n                    <Button className='my-3 btn-sm' variant=\"outline-dark\" onClick={createBikeHandler}>\r\n                        <i className='fas fa-plus'></i>{' '}Create Bike\r\n                    </Button>\r\n                </Col>\r\n            </Row>\r\n            <h3 className='text-center'><b>Bikes</b></h3>\r\n            {loadingDelete && <Loader />}\r\n            {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\r\n            {loading ? <Loader /> : error ? <Message variant='danger'>{error}</Message>:(\r\n            <>\r\n                <Table hover responsive className='table-sm text-center'>\r\n                    <thead className='dark-bgcolor'>\r\n                        <tr>\r\n                            <th>ID</th>\r\n                            <th>NAME</th>\r\n                            <th>BRAND</th>\r\n                            <th>CATEGORY</th>\r\n                            <th>PRICE</th>\r\n                            <th>IN STOCK</th>\r\n                            <th>ACTION</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {bikes.map(bike => (\r\n                            <tr key={bike._id}>\r\n                                <td>{bike._id}</td>\r\n                                <td>{bike.name}</td>\r\n                                <td>{bike.brand}</td>\r\n                                <td>{bike.category}</td>\r\n                                <td>{bike.price}</td>\r\n                                <td>{bike.countInStock}</td>\r\n                                <td>\r\n                                    <LinkContainer to={`/admin/bike/${bike._id}/edit`}>\r\n                                        <Button variant='outline-dark' className='btn-sm'><i className='fas fa-edit'></i></Button>\r\n                                    </LinkContainer>\r\n                                    {' '}\r\n                                    <Button variant='outline-danger' className='btn-sm' onClick={() => deleteHandler(bike._id)}>\r\n                                        <i className='fas fa-trash'></i>\r\n                                    </Button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </Table>\r\n                <PaginationBox pages={pages} page={page} isAdmin={true} />\r\n            </>\r\n            )}\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default BikeListView\r\n"]},"metadata":{},"sourceType":"module"}