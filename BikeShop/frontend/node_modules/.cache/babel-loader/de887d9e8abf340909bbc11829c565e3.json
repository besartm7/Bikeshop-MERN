{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/realmadrid/Desktop/Bike-v3/BikeShop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Form,Button,Card}from'react-bootstrap';import FormContainer from'../../components/FormContainer';import Message from'../../components/Message';import Loader from'../../components/Loader';import{getUserInfo,updateAdminUser}from'../../actions/userAction';import{USER_UPDATE_ADMIN_RESET}from'../../constants/userConstants';var UserEditView=function UserEditView(_ref){var match=_ref.match,history=_ref.history;var userId=match.params.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAdmin=_useState6[0],setIsAdmin=_useState6[1];var dispatch=useDispatch();var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userInfoDetails=useSelector(function(state){return state.userInfoDetails;});var loading=userInfoDetails.loading,error=userInfoDetails.error,user=userInfoDetails.user;var userUpdateAdmin=useSelector(function(state){return state.userUpdateAdmin;});var loadingUpdate=userUpdateAdmin.loading,errorUpdate=userUpdateAdmin.error,successUpdate=userUpdateAdmin.success;useEffect(function(){if(!userInfo||!userInfo.isAdmin){history.push('/login');}if(successUpdate){dispatch({type:USER_UPDATE_ADMIN_RESET});history.push('/admin/userlist');}else{if(!user.name||user._id!==userId){dispatch(getUserInfo(userId));}else{setName(user.name);setEmail(user.email);setIsAdmin(user.isAdmin);}}},[dispatch,history,userInfo,user,userId,successUpdate]);var submitHandler=function submitHandler(e){e.preventDefault();dispatch(updateAdminUser({_id:userId,name:name,email:email,isAdmin:isAdmin}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/userlist\",className:\"btn btn-light my-3\",children:\"Go Back\"}),/*#__PURE__*/_jsx(FormContainer,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Edit User\"}),loadingUpdate&&/*#__PURE__*/_jsx(Loader,{}),errorUpdate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorUpdate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"isadmin\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:\"Is Admin?\",checked:isAdmin,onChange:function onChange(e){return setIsAdmin(e.target.checked);}})}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",className:\"btn-dark btn-block\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-save\"}),' ',\"Save\"]})]})]})})})]});};export default UserEditView;","map":{"version":3,"sources":["C:/Users/realmadrid/Desktop/Bike-v3/BikeShop/frontend/src/layout/admin/UserEditView.js"],"names":["React","useEffect","useState","Link","useDispatch","useSelector","Form","Button","Card","FormContainer","Message","Loader","getUserInfo","updateAdminUser","USER_UPDATE_ADMIN_RESET","UserEditView","match","history","userId","params","id","name","setName","email","setEmail","isAdmin","setIsAdmin","dispatch","userLogin","state","userInfo","userInfoDetails","loading","error","user","userUpdateAdmin","loadingUpdate","errorUpdate","successUpdate","success","push","type","_id","submitHandler","e","preventDefault","target","value","checked"],"mappings":"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","sourcesContent":["import React,{ useEffect, useState} from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Form, Button, Card } from 'react-bootstrap'\r\nimport FormContainer from '../../components/FormContainer'\r\nimport Message from '../../components/Message'\r\nimport Loader from '../../components/Loader'\r\nimport { getUserInfo, updateAdminUser } from '../../actions/userAction'\r\nimport { USER_UPDATE_ADMIN_RESET } from '../../constants/userConstants'\r\n\r\n\r\nconst UserEditView = ({match, history}) => {\r\n    const userId = match.params.id\r\n\r\n    const[name, setName] = useState('')\r\n    const[email, setEmail] = useState('')\r\n    const[isAdmin, setIsAdmin] = useState(false)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const userInfoDetails = useSelector(state => state.userInfoDetails)\r\n    const { loading, error, user } = userInfoDetails\r\n\r\n    const userUpdateAdmin = useSelector(state => state.userUpdateAdmin)\r\n    const { loading: loadingUpdate, error: errorUpdate, success: successUpdate } = userUpdateAdmin\r\n\r\n    \r\n\r\n\r\n    useEffect(()=>{\r\n        if(!userInfo || !userInfo.isAdmin){\r\n            history.push('/login')\r\n        }\r\n\r\n        if(successUpdate){\r\n            dispatch({ type: USER_UPDATE_ADMIN_RESET })\r\n            history.push('/admin/userlist')\r\n        }else{\r\n            if(!user.name || user._id  !== userId){\r\n                dispatch(getUserInfo(userId))\r\n            }else{\r\n                setName(user.name)\r\n                setEmail(user.email)\r\n                setIsAdmin(user.isAdmin)\r\n            }\r\n        }\r\n    },[dispatch, history, userInfo, user, userId, successUpdate])\r\n\r\n    const submitHandler = (e)=>{\r\n        e.preventDefault()\r\n        dispatch(updateAdminUser({\r\n            _id: userId,\r\n            name,\r\n            email,\r\n            isAdmin\r\n        }))\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Link to='/admin/userlist' className='btn btn-light my-3'>\r\n                Go Back\r\n            </Link>\r\n            <FormContainer>\r\n                <Card>\r\n                <Card.Body>\r\n                <h3>Edit User</h3>\r\n                {loadingUpdate && <Loader />}\r\n                {errorUpdate && <Message variant='danger'>{errorUpdate}</Message>}\r\n                {loading ? <Loader /> : error ? <Message variant='danger'>{error}</Message> :(\r\n                    <Form onSubmit={submitHandler}>\r\n                        <Form.Group controlId='name'>\r\n                            <Form.Label>Name:</Form.Label>\r\n                            <Form.Control type='text' placeholder='Enter name' value={name} onChange={(e) => setName(e.target.value)}></Form.Control>\r\n                        </Form.Group>\r\n                        <Form.Group controlId='email'>\r\n                            <Form.Label>Email:</Form.Label>\r\n                            <Form.Control type='text' placeholder='Enter email' value={email} onChange={(e) => setEmail(e.target.value)}></Form.Control>\r\n                        </Form.Group>\r\n                        <Form.Group controlId='isadmin'>\r\n                            <Form.Check \r\n                                type='checkbox' \r\n                                label='Is Admin?' \r\n                                checked={isAdmin} \r\n                                onChange={(e) => setIsAdmin(e.target.checked)}></Form.Check>\r\n                        </Form.Group>\r\n                        <Button type='submit' className='btn-dark btn-block'><i className='fas fa-save'></i>{' '}Save</Button>\r\n                    </Form>\r\n                )}\r\n                \r\n                </Card.Body>\r\n                </Card>\r\n            </FormContainer>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default UserEditView\r\n"]},"metadata":{},"sourceType":"module"}