{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/realmadrid/Desktop/BikeShop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../../components/Message';import Loader from'../../components/Loader';import{listUsers,deleteUser}from'../../actions/userAction';import{getItemspp}from'../../actions/settingsAction';import PaginationOnly from'../../components/PaginationOnly';var UserListView=function UserListView(_ref){var history=_ref.history,match=_ref.match;var pageNumber=match.params.pageNumber||1;var _useState=useState(),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var dispatch=useDispatch();var userList=useSelector(function(state){return state.userList;});var loading=userList.loading,error=userList.error,users=userList.users,pages=userList.pages,page=userList.page;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userDelete=useSelector(function(state){return state.userDelete;});var successDelete=userDelete.success;var settingItemspp=useSelector(function(state){return state.settingItemspp;});var itemspp=settingItemspp.items;useEffect(function(){if(userInfo&&userInfo.isAdmin){if(items)dispatch(listUsers(pageNumber,items));if(!itemspp||!itemspp.items)dispatch(getItemspp());else setItems(itemspp.items);}else{history.push('/login');}},[dispatch,history,userInfo,successDelete,pageNumber,items,itemspp]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure?')){dispatch(deleteUser(id));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Users\"})}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{hover:true,responsive:true,className:\"table-sm text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"dark-bgcolor\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EMAIL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ADMIN\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ACTION\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.isAdmin?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\"}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/user/\".concat(user._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"outline-dark\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(user._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},user._id);})})]}),/*#__PURE__*/_jsx(PaginationOnly,{pages:pages,page:page,rout:'/admin/userlist'})]})]});};export default UserListView;","map":{"version":3,"sources":["C:/Users/realmadrid/Desktop/BikeShop/frontend/src/layout/admin/UserListView.js"],"names":["React","useState","useEffect","LinkContainer","Table","Button","useDispatch","useSelector","Message","Loader","listUsers","deleteUser","getItemspp","PaginationOnly","UserListView","history","match","pageNumber","params","items","setItems","dispatch","userList","state","loading","error","users","pages","page","userLogin","userInfo","userDelete","successDelete","success","settingItemspp","itemspp","isAdmin","push","deleteHandler","id","window","confirm","map","user","_id","name","email"],"mappings":"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","sourcesContent":["import React,{ useState, useEffect} from 'react'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { Table, Button } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from '../../components/Message'\r\nimport Loader from '../../components/Loader'\r\nimport { listUsers, deleteUser } from '../../actions/userAction' \r\nimport { getItemspp } from '../../actions/settingsAction' \r\nimport PaginationOnly from '../../components/PaginationOnly';\r\n\r\nconst UserListView = ({history, match}) => {\r\n    const pageNumber = match.params.pageNumber || 1\r\n    const[items, setItems] = useState()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const userList = useSelector(state => state.userList)\r\n    const { loading, error, users, pages, page } = userList\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const userDelete = useSelector(state => state.userDelete)\r\n    const { success: successDelete } = userDelete\r\n\r\n    const settingItemspp = useSelector(state => state.settingItemspp)\r\n    const { items: itemspp } = settingItemspp\r\n\r\n    useEffect(()=>{\r\n        if(userInfo && userInfo.isAdmin){\r\n            if(items)\r\n                dispatch(listUsers(pageNumber, items))\r\n            if(!itemspp || !itemspp.items)\r\n                dispatch(getItemspp())\r\n            else\r\n                setItems(itemspp.items)\r\n        }else{\r\n            history.push('/login')\r\n        }\r\n        \r\n    },[dispatch, history, userInfo, successDelete, pageNumber, items, itemspp])\r\n\r\n    const deleteHandler = (id) =>{\r\n        if(window.confirm('Are you sure?')){\r\n            dispatch(deleteUser(id))\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <h3 className='text-center'><b>Users</b></h3>\r\n            {loading ? <Loader /> : error ? <Message variant='danger'>{error}</Message>:(\r\n                <>\r\n                <Table hover responsive className='table-sm text-center'>\r\n                    <thead className='dark-bgcolor'>\r\n                        <tr>\r\n                            <th>ID</th>\r\n                            <th>NAME</th>\r\n                            <th>EMAIL</th>\r\n                            <th>ADMIN</th>\r\n                            <th>ACTION</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {users.map(user => (\r\n                            <tr key={user._id}>\r\n                                <td>{user._id}</td>\r\n                                <td>{user.name}</td>\r\n                                <td>{user.email}</td>\r\n                                <td>\r\n                                    {user.isAdmin ? \r\n                                        (<i className='fas fa-check'></i>) \r\n                                        :(<i className='fas fa-times'></i>)}\r\n                                </td>\r\n                                <td>\r\n                                    <LinkContainer to={`/admin/user/${user._id}/edit`}>\r\n                                        <Button variant='outline-dark' className='btn-sm'><i className='fas fa-edit'></i></Button>\r\n                                    </LinkContainer>\r\n                                    <Button variant='outline-danger' className='btn-sm' onClick={() => deleteHandler(user._id)}>\r\n                                        <i className='fas fa-trash'></i>\r\n                                    </Button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </Table>\r\n                <PaginationOnly pages={pages} page={page} rout={'/admin/userlist'}/>\r\n                </>\r\n            )}\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default UserListView\r\n"]},"metadata":{},"sourceType":"module"}